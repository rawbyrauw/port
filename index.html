<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raúl Ocaña | Language Strategies Portfolio</title>
    <!-- Google Fonts: Montserrat and Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        tecBlue: '#003399',
                        logisticsGray: '#708090',
                    },
                    fontFamily: {
                        heading: ['Montserrat', 'sans-serif'],
                        body: ['Open Sans', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Open Sans', sans-serif; scroll-behavior: smooth; }
        h1, h2, h3 { font-family: 'Montserrat', sans-serif; }
        .active-tab { border-bottom: 3px solid #003399; color: #003399; }
        .bg-pattern {
            background-color: #ffffff;
            background-image:  linear-gradient(#f3f4f6 1px, transparent 1px), linear-gradient(90deg, #f3f4f6 1px, transparent 1px);
            background-size: 40px 40px;
        }
        .loading-spinner {
            border: 3px solid rgba(0, 51, 153, 0.1);
            border-top: 3px solid #003399;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Chat Assistant Styles */
        #chat-window {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: bottom right;
        }
        .message-inbound { background: #f3f4f6; border-bottom-left-radius: 2px; }
        .message-outbound { background: #003399; color: white; border-bottom-right-radius: 2px; }
    </style>
</head>
<body class="bg-white text-gray-800">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white/90 backdrop-blur-sm border-b border-gray-100 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="text-tecBlue font-bold text-xl tracking-tight mb-2 md:mb-0">
                RAÚL OCAÑA <span class="text-logisticsGray font-normal">| PORTFOLIO</span>
            </div>
            <div class="flex flex-wrap justify-center space-x-4 md:space-x-6 text-sm font-semibold uppercase tracking-widest text-gray-500">
                <button onclick="showSection('home')" id="nav-home" class="hover:text-tecBlue transition active-tab">Home</button>
                <button onclick="showSection('units')" id="nav-units" class="hover:text-tecBlue transition">Units</button>
                <button onclick="showSection('workshop')" id="nav-workshop" class="hover:text-tecBlue transition">✨ Workshop</button>
                <button onclick="showSection('reflections')" id="nav-reflections" class="hover:text-tecBlue transition">Reflections</button>
                <button onclick="showSection('contact')" id="nav-contact" class="hover:text-tecBlue transition">CV</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 min-h-screen">
        
        <!-- HOME SECTION -->
        <section id="section-home" class="max-w-6xl mx-auto px-6 py-12">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="w-full md:w-1/2 space-y-6">
                    <div class="inline-block px-3 py-1 bg-tecBlue/10 text-tecBlue text-xs font-bold rounded-full uppercase tracking-widest">
                        University Course: Language Strategies
                    </div>
                    <h1 class="text-4xl md:text-5xl font-bold leading-tight text-gray-900">
                        Language Strategies & Global Communication: <span class="text-tecBlue text-3xl block mt-2">Portfolio of Evidence</span>
                    </h1>
                    <p class="text-lg text-gray-600 leading-relaxed">
                        I am an International Business and Logistics student at <span class="font-semibold text-tecBlue">Tec de Monterrey</span> and <span class="font-semibold text-tecBlue">THWS Germany</span>. 
                        This portfolio documents my journey in mastering linguistic tools to bridge the gap between technical data and human connection.
                    </p>
                    <div class="flex flex-wrap gap-4 pt-4">
                        <button onclick="showSection('units')" class="bg-tecBlue text-white px-8 py-3 rounded shadow-lg hover:bg-blue-800 transition transform hover:-translate-y-1">
                            View Coursework
                        </button>
                        <button onclick="toggleAssistant()" class="bg-indigo-600 text-white px-8 py-3 rounded shadow-lg hover:bg-indigo-700 transition transform hover:-translate-y-1">
                            ✨ Ask Assistant
                        </button>
                        <button onclick="downloadResume()" class="border-2 border-tecBlue text-tecBlue font-bold px-8 py-3 rounded hover:bg-tecBlue hover:text-white transition flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                            Download CV
                        </button>
                    </div>
                </div>
                <div class="w-full md:w-1/2 relative">
                    <div class="aspect-square bg-gray-100 rounded-2xl overflow-hidden shadow-2xl flex items-center justify-center border-4 border-white">
                        <!-- Updated: Image added here -->
                        <img src="15815727.jpg" alt="Raúl Ocaña" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div class="hidden text-center p-8">
                            <svg class="w-24 h-24 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                            <p class="text-logisticsGray font-medium italic">Photo Unavailable</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- STRATEGIC WORKSHOP (AI) -->
        <section id="section-workshop" class="hidden max-w-6xl mx-auto px-6 py-12">
            <div class="mb-12">
                <h2 class="text-3xl font-bold text-tecBlue mb-2 italic uppercase">✨ Strategic Workshop</h2>
                <p class="text-logisticsGray">Using Artificial Intelligence to refine professional communication and visualize linguistic concepts.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                
                <!-- Tool 1: Strategic Optimizer -->
                <div class="bg-gray-50 p-8 rounded-2xl border border-gray-200">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <svg class="w-6 h-6 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        ✨ Strategic Content Optimizer
                    </h3>
                    <p class="text-sm text-gray-600 mb-6 italic">Apply "Lean Communication" to your drafts. Gemini analyzes your text for redundancy and clarity.</p>
                    <textarea id="optimize-input" class="w-full h-40 p-4 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-tecBlue outline-none" placeholder="Paste your draft or essay paragraph here..."></textarea>
                    <div class="mt-4 flex justify-between items-center">
                        <button onclick="optimizeStrategy()" id="optimize-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-indigo-700 transition flex items-center">
                            <span>✨ Optimize Strategy</span>
                        </button>
                        <div id="optimize-loader" class="hidden loading-spinner"></div>
                    </div>
                    <div id="optimize-result" class="mt-6 p-4 bg-white border border-indigo-100 rounded-xl hidden text-sm text-gray-700 leading-relaxed"></div>
                </div>

                <!-- Tool 2: Audio Reflection -->
                <div class="bg-gray-50 p-8 rounded-2xl border border-gray-200">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <svg class="w-6 h-6 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>
                        ✨ Professional Voice (TTS)
                    </h3>
                    <p class="text-sm text-gray-600 mb-6 italic">Convert your written reflections into audio for auditory assessment.</p>
                    <textarea id="tts-input" class="w-full h-40 p-4 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-tecBlue outline-none" placeholder="Enter text to hear in a professional tone..."></textarea>
                    <div class="mt-4 flex justify-between items-center">
                        <button onclick="speakStrategy()" id="tts-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-indigo-700 transition flex items-center">
                            <span>✨ Generate Audio</span>
                        </button>
                        <div id="tts-loader" class="hidden loading-spinner"></div>
                    </div>
                    <div id="tts-audio-container" class="mt-6 hidden">
                        <audio id="tts-player" controls class="w-full"></audio>
                    </div>
                </div>
            </div>
        </section>

        <!-- UNITS SECTION -->
        <section id="section-units" class="hidden max-w-6xl mx-auto px-6 py-12">
            <h2 class="text-3xl font-bold mb-4 text-tecBlue uppercase tracking-tighter italic">Course Evidence</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="text-xl font-bold mb-3">Unit 1: Fundamentals</h3>
                    <p class="text-gray-600 mb-6">Initial exercises focusing on diagnostic evaluation.</p>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="text-xl font-bold mb-3">Unit 2: Advanced Applications</h3>
                    <p class="text-gray-600 mb-6">Strategic communication in a global context.</p>
                </div>
            </div>
        </section>

        <!-- REFLECTIONS SECTION -->
        <section id="section-reflections" class="hidden max-w-4xl mx-auto px-6 py-12">
            <h2 class="text-3xl font-bold mb-8 text-tecBlue">Learning Reflections</h2>
            <div class="bg-pattern p-8 md:p-12 rounded-2xl border border-gray-200">
                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-tecBlue mb-8">
                    <span class="text-xs font-bold text-logisticsGray uppercase tracking-widest">Entry #1 — Introduction</span>
                    <h3 class="text-xl font-bold mt-2 mb-4">The Convergence of Data and Language</h3>
                    <p class="text-gray-600 leading-relaxed italic">
                        "In my studies at THWS in Germany, I've noticed that technical competence in Supply Chain is universal, but the way we explain complex data varies across cultures. My goal for this course is to refine my 'Communication Lean-ness'—reducing linguistic waste to ensure maximum clarity."
                    </p>
                </div>
            </div>
        </section>

        <!-- CONTACT / CV SECTION -->
        <section id="section-contact" class="hidden max-w-6xl mx-auto px-6 py-12">
            <div class="bg-gray-50 p-8 rounded-xl border border-gray-200">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 border-b border-gray-200 pb-6">
                    <div>
                        <h2 class="text-3xl font-bold text-tecBlue">Raúl Alejandro Ocaña Estrada</h2>
                        <p class="text-logisticsGray font-semibold">Analytics & Supply Chain Data Professional</p>
                    </div>
                    <button onclick="downloadResume()" class="bg-tecBlue text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-blue-800 transition">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        Download Resume PDF
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <div class="space-y-6">
                        <div>
                            <h4 class="font-bold text-tecBlue uppercase text-xs tracking-widest mb-3">Core Expertise</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-white border border-gray-200 rounded text-xs">SQL</span>
                                <span class="px-2 py-1 bg-white border border-gray-200 rounded text-xs">Python</span>
                                <span class="px-2 py-1 bg-white border border-gray-200 rounded text-xs">Power BI</span>
                                <span class="px-2 py-1 bg-white border border-gray-200 rounded text-xs">SAP ERP & Ariba</span>
                                <span class="px-2 py-1 bg-white border border-gray-200 rounded text-xs">Lean Six Sigma</span>
                                <span class="px-2 py-1 bg-white border border-gray-200 rounded text-xs">KPI Monitoring</span>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-bold text-tecBlue uppercase text-xs tracking-widest mb-3">Education</h4>
                            <div class="space-y-4">
                                <div>
                                    <p class="font-bold text-sm">B.A. in Logistics (Candidate)</p>
                                    <p class="text-xs text-gray-500 italic">THWS Würzburg-Schweinfurt, Germany | Exp. Oct 2025</p>
                                </div>
                                <div>
                                    <p class="font-bold text-sm">B.A. in International Business (Candidate)</p>
                                    <p class="text-xs text-gray-500 italic">Tecnológico de Monterrey, Mexico</p>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-bold text-tecBlue uppercase text-xs tracking-widest mb-3">Linguistic Proficiency</h4>
                            <ul class="text-sm space-y-1">
                                <li><span class="font-semibold">Spanish:</span> Native</li>
                                <li><span class="font-semibold">English:</span> Advanced</li>
                                <li><span class="font-semibold">German:</span> A2</li>
                            </ul>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <h4 class="font-bold text-tecBlue uppercase text-xs tracking-widest mb-3">Professional Experience</h4>
                        <div class="space-y-4">
                            <div>
                                <p class="font-bold text-sm">Data Collection Analyst — ECN Staffing</p>
                                <p class="text-xs text-gray-400">Feb 2025 - Sep 2025 | Remote</p>
                                <p class="text-xs text-gray-600 mt-1">Structured raw data using SQL/Excel for client workforce analytics projects.</p>
                            </div>
                            <div>
                                <p class="font-bold text-sm">Supply Chain Sourcing Intern — GE Vernova</p>
                                <p class="text-xs text-gray-400">Aug 2023 - Aug 2024 | Michoacán, MX</p>
                                <p class="text-xs text-gray-600 mt-1">Achieved 15% cost reduction through SAP spend analysis and KPI dashboards.</p>
                            </div>
                            <div>
                                <p class="font-bold text-sm">Operations Coordinator — E. de la Defensa del Voto</p>
                                <p class="text-xs text-gray-400">Jan 2021 - Sep 2021 | Morelia, MX</p>
                                <p class="text-xs text-gray-600 mt-1">Increased logistics efficiency by 25% using Lean methodologies.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-200 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-500">
                    <div class="flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>rauw.ocana@gmail.com</div>
                    <div class="flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>+49 1577 4010314</div>
                    <div class="flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path></svg>Würzburg, Germany</div>
                </div>
            </div>
        </section>

    </main>

    <!-- FLOATING ASSISTANT WIDGET -->
    <div class="fixed bottom-6 right-6 z-[60]">
        <button onclick="toggleAssistant()" class="bg-tecBlue text-white p-4 rounded-full shadow-2xl hover:scale-110 transition transform active:scale-95 group relative">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
        </button>

        <div id="chat-window" class="absolute bottom-20 right-0 w-[350px] max-w-[calc(100vw-48px)] bg-white rounded-2xl shadow-2xl border border-gray-100 hidden flex-col overflow-hidden">
            <div class="bg-tecBlue p-4 text-white flex justify-between items-center">
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center mr-3">✨</div>
                    <div>
                        <p class="text-xs font-bold leading-none">Portfolio Assistant</p>
                        <p class="text-[10px] opacity-70">Guided by Raúl's Updated CV</p>
                    </div>
                </div>
                <button onclick="toggleAssistant()" class="hover:bg-white/10 p-1 rounded">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="chat-messages" class="flex-1 h-[300px] overflow-y-auto p-4 space-y-4 text-sm bg-gray-50/50">
                <div class="message-inbound p-3 rounded-xl max-w-[85%]">
                    Hello! I'm Raúl's digital assistant. I have his latest resume data (including his recent experience at <strong>ECN Staffing</strong> and <strong>GE Vernova</strong>). How can I help you navigate his Language Strategies portfolio?
                </div>
            </div>
            <div class="p-4 bg-white border-t border-gray-100 flex items-center gap-2">
                <input id="assistant-input" type="text" class="flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm outline-none focus:ring-1 focus:ring-tecBlue" placeholder="Ask about Units, experience..." onkeypress="if(event.key==='Enter') sendMessageToAssistant()">
                <button onclick="sendMessageToAssistant()" class="bg-tecBlue text-white p-2 rounded-full hover:bg-blue-700 transition">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"></path></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- UI Message Box (Custom Alert) -->
    <div id="message-box" class="fixed bottom-6 left-6 hidden bg-red-600 text-white px-6 py-4 rounded-xl shadow-2xl z-50">
        <p id="message-text"></p>
        <button onclick="hideMessage()" class="mt-2 text-xs font-bold uppercase underline">Close</button>
    </div>

    <script>
        const apiKey = ""; // Provided by environment

        async function fetchGemini(model, payload, endpoint = "generateContent") {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:${endpoint}?key=${apiKey}`;
            let delay = 1000;
            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (response.ok) return await response.json();
                } catch (e) {}
                await new Promise(r => setTimeout(r, delay));
                delay *= 2;
            }
            throw new Error("API Connection Failed after retries.");
        }

        // --- ASSISTANT LOGIC ---
        function toggleAssistant() {
            const win = document.getElementById('chat-window');
            win.classList.toggle('hidden');
            if (!win.classList.contains('hidden')) {
                win.classList.add('flex');
                document.getElementById('assistant-input').focus();
            } else {
                win.classList.remove('flex');
            }
        }

        async function sendMessageToAssistant() {
            const input = document.getElementById('assistant-input');
            const message = input.value.trim();
            if (!message) return;

            addMessageToUI(message, 'outbound');
            input.value = '';

            const loadingId = 'loading-' + Date.now();
            const msgArea = document.getElementById('chat-messages');
            const loader = document.createElement('div');
            loader.id = loadingId;
            loader.className = 'message-inbound p-3 rounded-xl max-w-[85%] italic text-gray-400';
            loader.innerText = 'Analyzing context...';
            msgArea.appendChild(loader);
            msgArea.scrollTop = msgArea.scrollHeight;

            try {
                const systemPrompt = `You are a professional Portfolio Assistant for Raúl Alejandro Ocaña Estrada.
                UPDATED CONTEXT FROM RECENT CV (JAN 2026):
                - Analytics & Supply Chain Professional.
                - Current Education: B.A. Logistics (THWS Germany, Expected Oct 2025) and B.A. International Business (Tec de Monterrey).
                - Recent Experience: Data Collection Analyst at ECN Staffing (Feb-Sep 2025), Global Supply Chain Intern at GE Vernova (Aug 2023-2024).
                - Skills: SQL, Python (Intro), Power BI, SAP ERP & Ariba, Lean Six Sigma.
                - Languages: Spanish (Native), English (Advanced), German (A2).
                - Portfolio: Language Strategies course evidence.
                - Objective: Guide the professor. If they ask about his latest work, mention ECN Staffing or GE Vernova cost reductions (15%). 
                Tone: Helpful, professional, and academic.`;

                const data = await fetchGemini('gemini-2.5-flash-preview-09-2025', {
                    contents: [{ parts: [{ text: `User/Professor asks: "${message}"` }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                });

                const response = data.candidates?.[0]?.content?.parts?.[0]?.text || "I'm here to help you navigate Raúl's portfolio.";
                document.getElementById(loadingId).remove();
                addMessageToUI(response, 'inbound');
            } catch (err) {
                document.getElementById(loadingId).remove();
                addMessageToUI("Apologies. I'm having trouble connecting right now.", 'inbound');
            }
        }

        function addMessageToUI(text, type) {
            const msgArea = document.getElementById('chat-messages');
            const div = document.createElement('div');
            div.className = `p-3 rounded-xl max-w-[85%] ${type === 'outbound' ? 'message-outbound self-end' : 'message-inbound'}`;
            div.innerText = text;
            msgArea.appendChild(div);
            msgArea.scrollTop = msgArea.scrollHeight;
        }
function downloadResume() {
    window.open(
        "Raul_Ocana_Analytics_CV_OnePage_Final.pdf",
        "_blank"
    );
}


        // --- WORKSHOP TOOLS ---
        async function optimizeStrategy() {
            const input = document.getElementById('optimize-input').value;
            if (!input) return showMessage("Please enter some text to optimize.");
            const loader = document.getElementById('optimize-loader');
            const resultDiv = document.getElementById('optimize-result');
            loader.classList.remove('hidden');
            resultDiv.classList.add('hidden');
            try {
                const prompt = `Professional strategist specializing in "Lean Communication". Optimize this for clarity: "${input}"`;
                const data = await fetchGemini('gemini-2.5-flash-preview-09-2025', { contents: [{ parts: [{ text: prompt }] }] });
                resultDiv.innerHTML = (data.candidates?.[0]?.content?.parts?.[0]?.text || "").replace(/\n/g, '<br>');
                resultDiv.classList.remove('hidden');
            } catch (err) { showMessage("Failed to optimize."); } finally { loader.classList.add('hidden'); }
        }

        async function speakStrategy() {
            const text = document.getElementById('tts-input').value;
            if (!text) return showMessage("Please enter text.");
            const loader = document.getElementById('tts-loader');
            const container = document.getElementById('tts-audio-container');
            const player = document.getElementById('tts-player');
            loader.classList.remove('hidden');
            container.classList.add('hidden');
            try {
                const data = await fetchGemini('gemini-2.5-flash-preview-tts', {
                    contents: [{ parts: [{ text: `Say in a professional tone: ${text}` }] }],
                    generationConfig: {
                        responseModalities: ["AUDIO"],
                        speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Aoede" } } }
                    }
                });
                const pcmData = data.candidates[0].content.parts[0].inlineData.data;
                const sampleRate = parseInt(data.candidates[0].content.parts[0].inlineData.mimeType.match(/rate=(\d+)/)?.[1] || 24000);
                player.src = URL.createObjectURL(pcmToWav(pcmData, sampleRate));
                container.classList.remove('hidden');
            } catch (err) { showMessage("Audio failed."); } finally { loader.classList.add('hidden'); }
        }

        function pcmToWav(base64Pcm, sampleRate) {
            const pcmString = atob(base64Pcm);
            const pcm = new Int16Array(pcmString.length / 2);
            for (let i = 0; i < pcm.length; i++) pcm[i] = pcmString.charCodeAt(i * 2) | (pcmString.charCodeAt(i * 2 + 1) << 8);
            const buffer = new ArrayBuffer(44 + pcm.length * 2);
            const view = new DataView(buffer);
            const writeString = (offset, string) => { for (let i = 0; i < string.length; i++) view.setUint8(offset + i, string.charCodeAt(i)); };
            writeString(0, 'RIFF'); view.setUint32(4, 36 + pcm.length * 2, true);
            writeString(8, 'WAVE'); writeString(12, 'fmt ');
            view.setUint32(16, 16, true); view.setUint16(20, 1, true); view.setUint16(22, 1, true);
            view.setUint32(24, sampleRate, true); view.setUint32(28, sampleRate * 2, true);
            view.setUint16(32, 2, true); view.setUint16(34, 16, true);
            writeString(36, 'data'); view.setUint32(40, pcm.length * 2, true);
            for (let i = 0; i < pcm.length; i++) view.setInt16(44 + i * 2, pcm[i], true);
            return new Blob([buffer], { type: 'audio/wav' });
        }

        function showMessage(text) {
            document.getElementById('message-text').innerText = text;
            document.getElementById('message-box').classList.remove('hidden');
            setTimeout(hideMessage, 5000);
        }

        function hideMessage() { document.getElementById('message-box').classList.add('hidden'); }

        function showSection(sectionId) {
            const sections = ['home', 'units', 'workshop', 'reflections', 'contact'];
            sections.forEach(s => {
                const el = document.getElementById('section-' + s);
                const nav = document.getElementById('nav-' + s);
                if (el) el.classList.add('hidden');
                if (nav) nav.classList.remove('active-tab');
            });
            document.getElementById('section-' + sectionId).classList.remove('hidden');
            document.getElementById('nav-' + sectionId).classList.add('active-tab');
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
